
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> Creategui    Function - RestorePointsManager</title>
   <!-- Bootstrap CSS -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
   <!-- Bootstrap Icons -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
   <!-- Google Fonts -->
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
   <!-- Prism.js for syntax highlighting -->
   <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" rel="stylesheet">
    <!-- Mermaid.js for diagrams -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.5.0/dist/mermaid.min.js"></script>

   <style>
     body {
       font-family: 'Inter', sans-serif;
       color: #2c3e50;
       background-color: #f8f9fa;
     }
      .sticky-header {
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 1000;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        box-shadow: 0 4px 20px rgba(0,0,0,.15);
        backdrop-filter: blur(10px);
      }
      .navbar-brand {
        font-weight: 700;
        color: white !important;
        font-size: 1.5rem;
      }

       body { padding-top: 35px; }

      /* Sidebar Styles */
      .sidebar {
        position: fixed;
        padding: 25px 0;
        left: 0;
        width: 330px;
        height: calc(100vh);
        background: #eef2f6;
        border-right: 1px solid #e9ecef;
        overflow-y: auto;
        z-index: 999;
      }
      .sidebar .nav {
        padding: 20px;
        margin: 0; /* Reset any default margin */
      }
        .nav-link {font-size: 1rem; }
      .sidebar .nav-link {
        color: #2c3e50;
        font-weight: 500;
        border-radius: 10px;
        margin-bottom: 5px;
        display: block;
        text-decoration: none;
        white-space: nowrap;
        overflow: hidden;
      }
      .sidebar .nav-link:hover {
        background-color: #667eea;
        color: white;
      }
      .sidebar .nav-link.active {
        background-color: #667eea;
        color: white;
      }
      .sidebar .nav-link i {
        margin-right: 10px;
      }

      .main-content {
        margin-left: 330px;
        padding: 20px;
        position: relative;
        line-height: 1.7;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

       @media (max-width: 768px) {
         .hero-section {
           padding: 40px 20px;
           margin-bottom: 30px;
         }

         .hero-section h1 {
           font-size: 2rem;
         }

         .hero-section p {
           font-size: 1.1rem;
         }

         .sticky-header .navbar-brand {
           font-size: 1.2rem;
         }

         .sidebar {
           width: 100%;
           position: relative;
           height: auto;
           top: 0;
         }

         .main-content {
           margin-left: 0;
         }

         .chapter-card .card-body {
           padding: 20px;
         }

          .nav-buttons {
            bottom: 20px;
            right: 20px;
          }

          .nav-button {
            width: 35px;
            height: 35px;
            font-size: 16px;
          }
       }

      @media (max-width: 576px) {
        .hero-section h1 {
          font-size: 1.8rem;
        }

        .chapter-card {
          margin-bottom: 15px;
        }
      }

     h1, h2, h3, h4, h5, h6 {
       color: #2c3e50;
       font-weight: 600;
       margin-top: 2rem;
       margin-bottom: 1rem;
     }

      h1 {
        font-size: 2.5rem;
        background: linear-gradient(135deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1.5rem;
      }

      p {
        font-size: 1.1rem;
        margin-bottom: 1.5rem;
      }

      .hero-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 10px 0;
        margin-bottom: 40px;
        border-radius: 15px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,.1);
      }

      .hero-section h1 {
        color: white;
        -webkit-text-fill-color: white;
        font-size: 3rem;
        margin-bottom: 1rem;
      }

      .hero-section p {
        font-size: 1.3rem;
        opacity: 0.9;
      }

      .chapter-card {
        background: white;
        border: none;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,.08);
        /* Removed transition for nav consistency */
        margin-bottom: 20px;
        overflow: hidden;
      }

      .chapter-card:hover {
        /* Removed transform for consistency */
        box-shadow: 0 10px 25px rgba(0,0,0,.15);
      }

      .chapter-card .card-body {
        padding: 25px;
      }

      .chapter-card .card-title {
        color: #2c3e50;
        font-weight: 600;
        margin-bottom: 15px;
      }

      .chapter-card .card-text {
        color: #6c757d;
        line-height: 1.6;
      }

      .chapter-card .btn {
        border-radius: 25px;
        padding: 8px 20px;
        font-weight: 500;
        /* Removed transition for consistency */
      }
      .nav-buttons {
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 1000;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .nav-button {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        font-size: 18px;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(0,0,0,.2);

        /* Removed transition for consistency */
        display: flex;
        align-items: center;
        justify-content: center;
      }
     .nav-button:hover {
       /* Removed transform for consistency */
       box-shadow: 0 6px 20px rgba(0,0,0,.3);
     }

      /* Mermaid Diagram Styles */
      .mermaid {
        position: relative;
        text-align: center;
        margin: 30px 0;
        padding: 20px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,.1);
        overflow: hidden;
      }

      .mermaid svg {
        max-width: 100%;
        height: auto;
        border-radius: 10px;
        cursor: grab;
        transition: transform 0.3s ease;
      }

      .mermaid svg.dragging {
        cursor: grabbing;
      }

      /* Zoom Controls Overlay */
      .mermaid-zoom-controls {
        position: absolute;
        top: 10px;
        right: 10px;
        display: flex;
        flex-direction: column;
        gap: 5px;
        opacity: 1;
        transition: opacity 0.3s ease;
        z-index: 10;
      }

      .mermaid-zoom-btn {
        width: 30px;
        height: 30px;
        border: none;
        border-radius: 50%;
        background: rgba(102, 126, 234, 0.9);
        color: white;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px rgba(0,0,0,.2);
        transition: all 0.2s ease;
      }

      .mermaid-zoom-btn:hover {
        background: rgba(102, 126, 234, 1);
        transform: scale(1.1);
      }

      .mermaid-zoom-btn:active {
        transform: scale(0.95);
      }

      .chapter-nav {
        padding: 20px 0;
        margin-top: 40px;
        text-align: center;
        margin-left: 330px; /* Match sidebar width to align with main content */
        width: calc(100% - 330px); /* Account for sidebar width */
      }
      
      @media (max-width: 768px) {

     .chapter-nav .btn {
       border-radius: 25px;
       padding: 10px 25px;
       font-weight: 500;
       /* Removed transform for consistency */
     }

     .chapter-nav .btn:hover {
       /* Removed transform for consistency */
       box-shadow: 0 4px 15px rgba(0,0,0,.2);
     }

     code {
       background-color: #e9ecef;
       padding: 2px 6px;
       border-radius: 4px;
       color: #495057;
     }

     pre {
       background-color: #2d3748;
       color: #e2e8f0;
       padding: 20px;
       border-radius: 10px;
       overflow-x: auto;
       box-shadow: 0 4px 6px rgba(0,0,0,.1);
     }

      blockquote {
        border-left: 5px solid #667eea;
        background: linear-gradient(135deg, #f8f9fa, #ffffff);
        padding: 20px 25px;
        margin: 25px 0;
        border-radius: 0 15px 15px 0;
        box-shadow: 0 3px 10px rgba(0,0,0,.05);
        font-style: italic;
        position: relative;
      }

      blockquote::before {
        content: '"';
        font-size: 4rem;
        color: #667eea;
        opacity: 0.3;
        position: absolute;
        top: -10px;
        left: 15px;
        font-family: serif;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in-up {
        animation: fadeInUp 0.6s ease-out;
      }

      .chapter-card {
        animation: fadeInUp 0.6s ease-out;
        animation-fill-mode: both;
      }

      .chapter-card:nth-child(1) { animation-delay: 0.1s; }
      .chapter-card:nth-child(2) { animation-delay: 0.2s; }
      .chapter-card:nth-child(3) { animation-delay: 0.3s; }
      
      /* Center chapter navigation and footer within main content area */
      .chapter-nav {
        background: transparent;
        padding: 20px 0;
        margin-top: 40px;
        text-align: center;
        margin-left: 330px; /* Match sidebar width to align with main content */
        width: calc(100% - 330px); /* Account for sidebar width */
        position: relative; /* Ensure proper positioning */
      }
      
      footer {
        margin-left: 330px; /* Match sidebar width to align with main content */
        width: calc(100% - 330px); /* Account for sidebar width */
        position: relative; /* Ensure proper positioning */
      }
      
      @media (max-width: 768px) {
        .chapter-nav, footer {
          margin-left: 0 !important;
          width: 100% !important;
        }
      }
   </style>
</head>
<body>
    <!-- Sticky Header -->
    <header class="sticky-header">
       <nav class="navbar navbar-expand-lg navbar-light">
         <div class="d-flex justify-content-between align-items-center">
           <a href="index.html" class="btn btn-link text-white me-3" title="Home">
             <i class="bi bi-house-door fs-4"></i>
           </a>
           <div class="mx-auto">
             <span class="navbar-brand"> Creategui    Function - RestorePointsManager</span>
           </div>
           <div></div> <!-- Spacer -->
         </div>
       </nav>
    </header>

    <!-- Sidebar -->
    <div class="sidebar">
      <nav class="nav flex-column">
        <li class="nav-item">
          <a href="index.html" class="nav-link">
            <i class="bi bi-house-door"></i>Home
          </a>
        </li>
        <li class="nav-item"><a href="01_restore_point.html" class="nav-link">Restore Point</a></li>
<li class="nav-item"><a href="02_gui__graphical_user_interface_.html" class="nav-link">Gui  Graphical User Interface </a></li>
<li class="nav-item"><a href="03_admin_privileges.html" class="nav-link">Admin Privileges</a></li>
<li class="nav-item"><a href="04__creategui____function.html" class="nav-link"> Creategui    Function</a></li>
<li class="nav-item"><a href="05__refreshrestorepoints____function__implied_.html" class="nav-link"> Refreshrestorepoints    Function  Implied </a></li>
<li class="nav-item"><a href="06__checkadmin____function.html" class="nav-link"> Checkadmin    Function</a></li>
<li class="nav-item"><a href="07_logging.html" class="nav-link">Logging</a></li>
<li class="nav-item"><a href="08_global_variables.html" class="nav-link">Global Variables</a></li>
      </nav>
    </div>

    <div class="main-content">
      <div class="container mt-4">
        
        <h1>Chapter 4: <code>CreateGUI()</code> Function</h1>
<p>In the previous chapter, <a href="03_admin_privileges.html">Admin Privileges</a>, we learned why the <code>RestorePointsManager</code> program needs special permissions to work. But how does the program actually <em>show</em> you the buttons and lists you use to manage restore points? That&#39;s where the <code>CreateGUI()</code> function comes in!</p>
<p>Imagine you&#39;re building a house. You need walls, windows, and a door so people can live inside. The <code>CreateGUI()</code> function is like the architect and construction crew for our program&#39;s &quot;house&quot; – it builds the visual interface that you, the user, interact with. Without it, you&#39;d just have a program running in the background with no way to control it!</p>
<h2>What is the <code>CreateGUI()</code> Function?</h2>
<p>The <code>CreateGUI()</code> function is responsible for creating the program&#39;s <strong>Graphical User Interface (GUI)</strong>. It&#39;s the code that tells the computer to draw the main window, add labels, buttons, the list of restore points, and all the other visual elements you see.</p>
<p>Think of it as setting up the control panel for managing restore points. It&#39;s like arranging all the knobs, switches, and displays in a cockpit so the pilot can fly the plane.</p>
<h2>Key Concepts in <code>CreateGUI()</code></h2>
<p>Let&#39;s break down the key things the <code>CreateGUI()</code> function does:</p>
<ol>
<li><strong>Creating the Main Window:</strong> This is the foundation of the GUI. It&#39;s the blank canvas where everything else is placed.</li>
<li><strong>Adding Labels:</strong> Labels display information, like the number of restore points or the amount of disk space being used.</li>
<li><strong>Adding the ListView:</strong> The ListView is the list that shows all your existing restore points.</li>
<li><strong>Adding Buttons:</strong> Buttons allow you to perform actions, like creating, deleting, or refreshing the list of restore points.</li>
<li><strong>Setting up Event Handlers:</strong> Event handlers are like listeners that wait for you to click a button or interact with the GUI. When you do something, the event handler tells the program what to do next.</li>
</ol>
<h2>Using <code>CreateGUI()</code></h2>
<p>The good news is, you don&#39;t directly <em>use</em> the <code>CreateGUI()</code> function yourself. It&#39;s called automatically when the program starts. Its job is to set everything up so <em>you</em> can use the program.</p>
<p>Think of it like this: you don&#39;t build the car engine yourself, but you <em>do</em> use the car to drive around. <code>CreateGUI()</code> builds the &quot;engine&quot; of the GUI, and you use the GUI to manage restore points.</p>
<h2>Example: Creating a Button</h2>
<p>Let&#39;s look at a simplified example of how <code>CreateGUI()</code> creates a button:</p>
<pre><code class="language-autohotkey">global btnCreate := guiMain.Add(&quot;Button&quot;, &quot;x10 y340 w100 h30&quot;, &quot;➕ Create&quot;)
</code></pre>
<p>This code creates a button with the label &quot;➕ Create&quot;.</p>
<ul>
<li><code>guiMain.Add(&quot;Button&quot;, ...)</code>: This tells the program to add a button to the main window.</li>
<li><code>&quot;x10 y340 w100 h30&quot;</code>: This specifies the button&#39;s position and size. Don&#39;t worry too much about the exact numbers for now.</li>
<li><code>&quot;➕ Create&quot;</code>: This is the text that appears on the button.</li>
</ul>
<p>And here&#39;s how we tell the button what to do when it&#39;s clicked:</p>
<pre><code class="language-autohotkey">btnCreate.OnEvent(&quot;Click&quot;, CreateRestorePoint)
</code></pre>
<p>This code says: &quot;When the &#39;➕ Create&#39; button is clicked, run the <code>CreateRestorePoint</code> function.&quot; The <code>CreateRestorePoint</code> function (which we&#39;ll see later) then handles the actual creation of the restore point.</p>
<h2>Under the Hood: How <code>CreateGUI()</code> Works</h2>
<p>Let&#39;s take a look at what happens step-by-step when the <code>CreateGUI()</code> function is called:</p>
<ol>
<li><strong>Create the main window:</strong> The program creates the main window with a title (e.g., &quot;Restore Points Manager&quot;).</li>
<li><strong>Add labels:</strong> The program adds labels to display information about restore points and disk space.</li>
<li><strong>Add the ListView:</strong> The program adds the ListView to display the list of restore points.</li>
<li><strong>Add buttons:</strong> The program adds buttons for creating, deleting, and refreshing restore points.</li>
<li><strong>Set up event handlers:</strong> The program sets up event handlers to respond to user actions, like clicking a button.</li>
</ol>
<p>Here&#39;s a simplified sequence diagram:</p>
<div class="mermaid">sequenceDiagram
    participant RestorePointsManager
    participant GUI

    RestorePointsManager->>RestorePointsManager: Call CreateGUI()
    RestorePointsManager->>GUI: Create window, labels, listview, buttons
    GUI-->>RestorePointsManager: GUI elements created
    RestorePointsManager->>GUI: Display GUI</div>
<h2>Code Deep Dive</h2>
<p>Let&#39;s look at some more code snippets from the <code>CreateGUI()</code> function in <code>RestorePointsManager.ahk</code>:</p>
<pre><code class="language-autohotkey">global guiMain := Gui(&quot;-MinimizeBox&quot;, &quot;Restore Points Manager&quot;)
</code></pre>
<p>This line creates the main window. <code>-MinimizeBox</code> removes the minimize button. &quot;Restore Points Manager&quot; is the title of the window.</p>
<pre><code class="language-autohotkey">global lblRestorePointsCount := guiMain.Add(&quot;Text&quot;, &quot;x10 y5 w250 h20&quot;, &quot;Restore Points: 0&quot;)
</code></pre>
<p>This line creates a label that displays the number of restore points.  The text initially says &quot;Restore Points: 0&quot;.</p>
<pre><code class="language-autohotkey">global lvRestorePoints := guiMain.Add(&quot;ListView&quot;, &quot;x10 y30 w600 h300 grid&quot;, [&quot;ID&quot;, &quot;Creation Time&quot;, &quot;Description&quot;])
</code></pre>
<p>This line creates the ListView, which will display the list of restore points. The <code>[&quot;ID&quot;, &quot;Creation Time&quot;, &quot;Description&quot;]</code> part specifies the column headers.</p>
<h2>Conclusion</h2>
<p>In this chapter, we learned about the <code>CreateGUI()</code> function and how it builds the visual interface of the <code>RestorePointsManager</code> program. We saw how it creates the main window, adds labels, buttons, and the ListView.</p>
<p>In the next chapter, we&#39;ll explore the <a href="05__refreshrestorepoints____function__implied_.html"><code>RefreshRestorePoints()</code> Function (Implied)</a> and see how it populates the ListView with the list of existing restore points.</p>


      </div>
    </div>

   <!-- Navigation Buttons -->
   <div class="nav-buttons">
     <button class="nav-button" onclick="scrollToTop()">↑</button>
     <button class="nav-button" onclick="scrollToBottom()">↓</button>
   </div>

    <!-- Chapter Navigation -->
    <div class="chapter-nav text-center mt-5 mb-5">
       
         <a href="03_admin_privileges.html" class="btn btn-secondary mx-2">← Previous</a>
         <a href="05__refreshrestorepoints____function__implied_.html" class="btn btn-primary mx-2">Next →</a>
       
    </div>

   <!-- Footer -->
   <footer class="text-center mt-5 py-4" style="border-top: 1px solid #e9ecef; background: #fff; margin-left: 330px; width: calc(100% - 330px); position: relative;">
     <div class="container">
       <p class="mb-0 text-muted">
         <small>Generated by <a href="https://github.com/sarfraznawaz2005/code2tut" class="text-decoration-none" style="color: #667eea; font-weight: 500;">Code2Tutorial</a></small>
       </p>
     </div>
   </footer>


  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Prism.js for syntax highlighting -->
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
   <script>
     // Initialize Mermaid
     mermaid.initialize({ startOnLoad: true });

     // Initialize syntax highlighting, but skip mermaid elements
     document.querySelectorAll('pre code').forEach((block) => {
       if (!block.closest('.mermaid')) {
         Prism.highlightElement(block);
       }
     });

     // Highlight current chapter in sidebar
     document.addEventListener('DOMContentLoaded', function() {
       const currentPage = window.location.pathname.split('/').pop();
       const navLinks = document.querySelectorAll('.sidebar .nav-link');
       navLinks.forEach(link => {
         if (link.getAttribute('href') === currentPage) {
           link.classList.add('active');
         }
       });
     });

    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
      if (e.key === 'ArrowUp') {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } else if (e.key === 'ArrowDown') {
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
      }
    });

    // Scroll functions for buttons
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function scrollToBottom() {
      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }

    // Mermaid zoom and pan functionality
    const ZOOM_STEP = 0.2;
    const MIN_ZOOM = 0.5;
    const MAX_ZOOM = 3;

    // Initialize zoom controls for each mermaid diagram
    document.addEventListener('DOMContentLoaded', function() {
      // Wait for Mermaid to finish rendering
      setTimeout(() => {
        const mermaidContainers = document.querySelectorAll('.mermaid');
        mermaidContainers.forEach(container => {
          initMermaidControls(container);
        });
      }, 1000); // Wait 1 second for Mermaid to render
    });

    function initMermaidControls(container) {
      const svg = container.querySelector('svg');
      if (!svg) return;

      // Add zoom controls overlay
      const controls = document.createElement('div');
      controls.className = 'mermaid-zoom-controls';
      controls.innerHTML = '<button class="mermaid-zoom-btn" onclick="zoomInMermaid(this)" title="Zoom In">+</button><button class="mermaid-zoom-btn" onclick="zoomOutMermaid(this)" title="Zoom Out">-</button><button class="mermaid-zoom-btn" onclick="resetMermaidZoom(this)" title="Reset Zoom">⭯</button>';
      container.appendChild(controls);

      // Initialize zoom and pan state
      svg.dataset.zoom = '1';
      svg.dataset.panX = '0';
      svg.dataset.panY = '0';
      svg.dataset.dragging = 'false';

      // Add pan functionality
      let isDragging = false;
      let startX, startY, startPanX, startPanY;

      svg.addEventListener('mousedown', function(e) {
        if (parseFloat(svg.dataset.zoom) > 1) {
          isDragging = true;
          startX = e.clientX;
          startY = e.clientY;
          startPanX = parseFloat(svg.dataset.panX);
          startPanY = parseFloat(svg.dataset.panY);
          svg.classList.add('dragging');
          svg.dataset.dragging = 'true';
          e.preventDefault();
        }
      });

      document.addEventListener('mousemove', function(e) {
        if (isDragging && svg.dataset.dragging === 'true') {
          const deltaX = e.clientX - startX;
          const deltaY = e.clientY - startY;
          const newPanX = startPanX + deltaX;
          const newPanY = startPanY + deltaY;

          svg.dataset.panX = newPanX;
          svg.dataset.panY = newPanY;
          updateMermaidTransform(svg);
        }
      });

      document.addEventListener('mouseup', function() {
        if (isDragging) {
          isDragging = false;
          svg.classList.remove('dragging');
          svg.dataset.dragging = 'false';
        }
      });

      // Prevent context menu on right click for better UX
      svg.addEventListener('contextmenu', function(e) {
        e.preventDefault();
      });
    }

    function zoomInMermaid(button) {
      const container = button.closest('.mermaid');
      const svg = container.querySelector('svg');
      let zoom = parseFloat(svg.dataset.zoom);
      zoom = Math.min(zoom + ZOOM_STEP, MAX_ZOOM);
      svg.dataset.zoom = zoom;
      updateMermaidTransform(svg);
      container.classList.add('zoomed');
    }

    function zoomOutMermaid(button) {
      const container = button.closest('.mermaid');
      const svg = container.querySelector('svg');
      let zoom = parseFloat(svg.dataset.zoom);
      zoom = Math.max(zoom - ZOOM_STEP, MIN_ZOOM);
      svg.dataset.zoom = zoom;
      updateMermaidTransform(svg);
      if (zoom <= 1) {
        container.classList.remove('zoomed');
      }
    }

    function resetMermaidZoom(button) {
      const container = button.closest('.mermaid');
      const svg = container.querySelector('svg');
      svg.dataset.zoom = '1';
      svg.dataset.panX = '0';
      svg.dataset.panY = '0';
      updateMermaidTransform(svg);
      container.classList.remove('zoomed');
    }

    function updateMermaidTransform(svg) {
      const zoom = parseFloat(svg.dataset.zoom);
      const panX = parseFloat(svg.dataset.panX);
      const panY = parseFloat(svg.dataset.panY);

      svg.style.transform = 'translate(' + panX + 'px, ' + panY + 'px) scale(' + zoom + ')';
      svg.style.transformOrigin = 'center center';
    }


  </script>
</body>
</html>
